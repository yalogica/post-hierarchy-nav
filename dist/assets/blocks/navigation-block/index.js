(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,o=window.wp.serverSideRender;var s=e.n(o);const a=window.wp.blockEditor,l=window.wp.components,n=window.wp.data,r=window.ReactJSXRuntime,i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"post-hierarchy-nav/navigation","title":"Hierarchy Nav","category":"widgets","icon":"list-view","description":"Displays a hierarchical navigation tree of posts or custom post types.","supports":{"html":false,"className":true},"attributes":{"postType":{"type":"string","default":"post"},"mode":{"type":"string","default":"all"},"customPostId":{"type":"number","default":0},"showCount":{"type":"boolean","default":false},"activePostClassName":{"type":"string","default":"active"}},"editorScript":"file:./index.js"}');(0,t.registerBlockType)(i,{edit:({attributes:e,setAttributes:t})=>{const{postType:o,mode:i,customPostId:p,showCount:c,activePostClassName:u}=e,d=(0,a.useBlockProps)(),{postTypes:g,isPostTypesLoading:v}=(0,n.useSelect)(e=>{const{getPostTypes:t,isResolving:o}=e("core"),s=t({per_page:-1});return{postTypes:s?.filter(e=>e.viewable),isPostTypesLoading:o("core","getPostTypes",[{per_page:-1}])}},[]),m=g?g.map(e=>({label:e.labels.singular_name||e.slug,value:e.slug})):[],h=(0,n.useSelect)(e=>{const{getEntityRecords:t}=e("core");return t("postType",o,{per_page:100})},[o]),y=h?h.map(e=>({label:e.title.rendered,value:e.id})):[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.InspectorControls,{children:(0,r.jsxs)(l.PanelBody,{title:"Settings",children:[v?(0,r.jsx)(l.Spinner,{}):(0,r.jsx)(l.SelectControl,{label:"Post Type",value:o,options:m,onChange:e=>t({postType:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,r.jsx)(l.SelectControl,{label:"Mode",value:i,options:[{label:"All",value:"all"},{label:"Custom post",value:"custom"},{label:"Auto",value:"auto"}],onChange:e=>t({mode:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),"custom"===e.mode&&(0===y.length?(0,r.jsx)(l.Spinner,{}):(0,r.jsx)(l.SelectControl,{label:"Select a Post",value:`${p}`,options:[{label:"Select a post...",value:0},...y],onChange:e=>t({customPostId:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),(0,r.jsx)(l.ToggleControl,{label:"Show child count",checked:c,onChange:e=>t({showCount:e}),__nextHasNoMarginBottom:!0})]})}),(0,r.jsx)(a.InspectorAdvancedControls,{children:(0,r.jsx)(l.TextControl,{label:"Active item CSS class",value:u||"",onChange:e=>t({activePostClassName:e}),help:"Class applied to the current/active post."})}),(0,r.jsx)("div",{...d,children:(0,r.jsx)(s(),{block:"post-hierarchy-nav/navigation",attributes:e})})]})},save:()=>null})})();